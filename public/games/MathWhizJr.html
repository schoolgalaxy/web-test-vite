<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Whiz Jr.</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Comic Neue', cursive;
            background: linear-gradient(to right top, #65dfc9, #6cdbeb);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .game-container {
            transform: scale(0.95);
            transition: transform 0.5s ease-in-out;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 5s infinite;
        }

        @keyframes twinkle {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }

        .card {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-option {
            transition: all 0.2s ease;
        }
        
        .btn-option:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .btn-option:active {
            transform: scale(0.98);
        }
        
        .correct {
            background-color: #4ade80 !important; /* Green-400 */
            color: white;
            animation: pulse-correct 0.6s;
        }
        
        .incorrect {
            background-color: #f87171 !important; /* Red-400 */
            color: white;
            animation: shake-incorrect 0.6s;
        }

        @keyframes pulse-correct {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes shake-incorrect {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

    </style>
</head>
<body>
    <!-- Background Stars -->
    <script>
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.top = `${Math.random() * 100}%`;
            star.style.left = `${Math.random() * 100}%`;
            star.style.animationDelay = `${Math.random() * 5}s`;
            star.style.animationDuration = `${2 + Math.random() * 3}s`;
            document.body.appendChild(star);
        }
    </script>
    
    <div id="gameContainer" class="game-container w-full max-w-md mx-auto p-4 md:p-6">
        <div id="startScreen" class="text-center">
            <div class="card p-8 rounded-2xl shadow-2xl">
                <h1 class="text-5xl font-bold text-gray-800 mb-4">Math Whiz Jr.</h1>
                <p class="text-gray-600 text-lg mb-6">Select a difficulty to start!</p>
                <div class="grid grid-cols-1 gap-4">
                    <button onclick="startGame(1)" class="text-xl bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-6 rounded-xl transition duration-300">Easy (1st-2nd Grade)</button>
                    <button onclick="startGame(2)" class="text-xl bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-xl transition duration-300">Medium (3rd-4th Grade)</button>
                    <button onclick="startGame(3)" class="text-xl bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-6 rounded-xl transition duration-300">Hard (5th Grade)</button>
                </div>
            </div>
        </div>

        <div id="gameScreen" class="hidden">
            <div class="card p-6 rounded-2xl shadow-2xl">
                <div class="flex justify-between items-center mb-6">
                    <div class="text-lg font-bold text-gray-700">Score: <span id="score">0</span></div>
                    <div class="text-lg font-bold text-gray-700">Question: <span id="question-count">1</span>/10</div>
                </div>
                <div id="question" class="text-5xl font-bold text-center text-gray-800 my-10 bg-gray-100 p-6 rounded-lg"></div>
                <div id="options" class="grid grid-cols-2 gap-4 mt-6">
                </div>
                 <div id="feedback" class="text-center text-2xl font-bold mt-4 h-8"></div>
            </div>
        </div>

        <div id="endScreen" class="hidden text-center">
             <div class="card p-8 rounded-2xl shadow-2xl">
                <h2 class="text-4xl font-bold text-gray-800 mb-2">Game Over!</h2>
                <p class="text-2xl text-gray-600 mb-4">Your final score is:</p>
                <p id="finalScore" class="text-6xl font-bold text-blue-500 mb-8"></p>
                <button onclick="restartGame()" class="w-full text-2xl bg-purple-500 hover:bg-purple-600 text-white font-bold py-4 px-8 rounded-xl transition duration-300">Play Again</button>
            </div>
        </div>
    </div>

    <script>
        const startScreen = document.getElementById('startScreen');
        const gameScreen = document.getElementById('gameScreen');
        const endScreen = document.getElementById('endScreen');
        const questionElement = document.getElementById('question');
        const optionsElement = document.getElementById('options');
        const scoreElement = document.getElementById('score');
        const finalScoreElement = document.getElementById('finalScore');
        const questionCountElement = document.getElementById('question-count');
        const feedbackElement = document.getElementById('feedback');
        const gameContainer = document.getElementById('gameContainer');

        let score = 0;
        let currentQuestionIndex = 0;
        let questions = [];
        let difficulty = 1;

        function generateQuestion() {
            let num1, num2, operator, correctAnswer;
            const operators = difficulty === 1 ? ['+'] : (difficulty === 2 ? ['+', '-'] : ['+', '-', '*']);
            operator = operators[Math.floor(Math.random() * operators.length)];

            if (difficulty === 1) { // Easy: Addition up to 20
                num1 = Math.floor(Math.random() * 10) + 1;
                num2 = Math.floor(Math.random() * 10) + 1;
            } else if (difficulty === 2) { // Medium: Add/Subtract up to 50
                 num1 = Math.floor(Math.random() * 25) + 1;
                 num2 = Math.floor(Math.random() * 25) + 1;
                 if (operator === '-' && num1 < num2) {
                    [num1, num2] = [num2, num1]; // Swap to avoid negative answers
                 }
            } else { // Hard: Add/Subtract/Multiply
                if (operator === '*') {
                    num1 = Math.floor(Math.random() * 10) + 2;
                    num2 = Math.floor(Math.random() * 9) + 2;
                } else {
                    num1 = Math.floor(Math.random() * 50) + 10;
                    num2 = Math.floor(Math.random() * 50) + 10;
                    if (operator === '-' && num1 < num2) {
                       [num1, num2] = [num2, num1];
                    }
                }
            }

            switch(operator) {
                case '+': correctAnswer = num1 + num2; break;
                case '-': correctAnswer = num1 - num2; break;
                case '*': correctAnswer = num1 * num2; break;
            }

            const options = generateOptions(correctAnswer);
            return {
                text: `${num1} ${operator} ${num2}`,
                options: options,
                answer: correctAnswer
            };
        }
        
        function generateOptions(correctAnswer) {
            const options = new Set([correctAnswer]);
            while(options.size < 4) {
                const range = Math.max(10, correctAnswer * 0.5);
                let randomOption = correctAnswer + Math.floor(Math.random() * range) - Math.floor(range/2);
                if (randomOption < 0) randomOption = Math.abs(randomOption) + 1;
                if (randomOption !== correctAnswer) {
                   options.add(randomOption);
                }
            }
            return Array.from(options).sort(() => Math.random() - 0.5);
        }

        function startGame(level) {
            difficulty = level;
            score = 0;
            currentQuestionIndex = 0;
            questions = [];
            for(let i=0; i<10; i++){
                questions.push(generateQuestion());
            }

            startScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            endScreen.classList.add('hidden');
            gameContainer.style.transform = 'scale(1)';
            
            displayQuestion();
        }

        function displayQuestion() {
            if (currentQuestionIndex < questions.length) {
                const question = questions[currentQuestionIndex];
                questionElement.textContent = question.text;
                optionsElement.innerHTML = '';
                question.options.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.classList.add('btn-option', 'w-full', 'p-4', 'text-2xl', 'font-bold', 'rounded-lg', 'bg-white', 'text-gray-700', 'border-2', 'border-gray-200');
                    button.onclick = () => selectAnswer(button, option, question.answer);
                    optionsElement.appendChild(button);
                });
                scoreElement.textContent = score;
                questionCountElement.textContent = `${currentQuestionIndex + 1}/10`;
                feedbackElement.textContent = '';
            } else {
                showEndScreen();
            }
        }
        
        function selectAnswer(button, selectedOption, correctAnswer) {
            const buttons = optionsElement.querySelectorAll('button');
            buttons.forEach(btn => btn.disabled = true);
            
            if (selectedOption === correctAnswer) {
                score++;
                button.classList.add('correct');
                feedbackElement.textContent = "Correct! ðŸŽ‰";
                feedbackElement.style.color = '#4ade80';
            } else {
                button.classList.add('incorrect');
                feedbackElement.textContent = `Nice try! It was ${correctAnswer}`;
                feedbackElement.style.color = '#f87171';
                buttons.forEach(btn => {
                    if (parseInt(btn.textContent) === correctAnswer) {
                        btn.classList.add('correct');
                    }
                });
            }

            currentQuestionIndex++;
            setTimeout(() => {
                displayQuestion();
            }, 1500);
        }

        function showEndScreen() {
            gameScreen.classList.add('hidden');
            endScreen.classList.remove('hidden');
            finalScoreElement.textContent = score;
        }

        function restartGame() {
            endScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
            gameContainer.style.transform = 'scale(0.95)';
        }
    </script>
</body>
</html>
